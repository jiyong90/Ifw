<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.isu.ifw.mapper.WtmFlexibleStdMapper">
    <select id="getWtmFlexibleStd" parameterType="map" resultType="wtmFlexibleStd">
        <![CDATA[
			SELECT F_DATE_FORMAT(F_TO_DATE(F_STR_CONCAT(S.USE_SYMD, S.WORK_SHM), '%Y%m%d%H%i'), '%H:%i') AS WORK_SHM
			     , F_DATE_FORMAT(F_TO_DATE(F_STR_CONCAT(S.USE_SYMD, S.WORK_EHM), '%Y%m%d%H%i'), '%H:%i') AS WORK_EHM
			     , F_DATE_FORMAT(F_TO_DATE(F_STR_CONCAT(S.USE_SYMD, S.CORE_SHM), '%Y%m%d%H%i'), '%H:%i') AS CORE_SHM
			     , F_DATE_FORMAT(F_TO_DATE(F_STR_CONCAT(S.USE_SYMD, S.CORE_EHM), '%Y%m%d%H%i'), '%H:%i') AS CORE_EHM
			     , C.APPL_NM AS WORK_TYPE_NM 
			     , S.*
			     , C.*
			  FROM WTM_FLEXIBLE_STD_MGR S 
			  JOIN WTM_APPL_CODE C
			    ON C.ENTER_CD = S.ENTER_CD
			   AND C.TENANT_ID = S.TENANT_ID
			   AND S.WORK_TYPE_CD = C.APPL_CD
			 WHERE S.TENANT_ID = #{tenantId}
			   AND S.ENTER_CD = #{enterCd}
			   AND #{d} BETWEEN S.USE_SYMD AND S.USE_EYMD
			 ORDER BY S.USE_SYMD DESC
        ]]>
    </select>
</mapper>
